{% set id = uid() %}
{% set theme = global.common.theme %}
{% set colors = themeProperties.current_colors %}
{% set salesList = global.common.customerInfo.invoices %}
{% set offset = args.offset if args.offset else 0 %}
{% set limit = args.limit if args.limit else 10 * (offset + 1) %}
{% set backgroundColor = properties.customer_dashboard_sales_table_background_color if properties.customer_dashboard_sales_table_background_color is defined else 'background_accent_dark' %}
{% set colors = themeProperties.current_colors %}

<style>

  .sellix-customer-table {
    background: {{ colors[backgroundColor] }};
    box-shadow: {{ properties.customer_dashboard_sales_table_shadow }};
    border-radius: {{ properties.customer_dashboard_sales_table_border_radius }}rem;
    border: {{ "1px solid var(--borderColor)" if properties.customer_dashboard_sales_table_show_border else "none" }};
  }

</style>

{% if salesList.length === 0 %}
  <div class="empty-sales-list">
    {% render_snippet 'Customer Empty Sales Icon' %}
    <span class="empty-sales-list-title">
          {{ 'customer.dashboard.sales.isEmpty.title' | t }}
        </span>
    <span class="empty-sales-list-description">
          {{ 'customer.dashboard.sales.isEmpty.message' | t }}
        </span>
  </div>
{% else %}
  <table class="sellix-customer-table mb-5" cellspacing="0" cellpadding="0">
    <thead data-product-id="{{ item.uniqid }}" class="sellix-customer-table-head">
    <tr>
      <th colspan="5" style="border-bottom: 1px solid var(--borderColor); width: 60%;">
        {{ 'customer.dashboard.sales.columns.invoice' | t }}
      </th>
      <th rowspan="2" style="border-left: 1px solid var(--borderColor); text-align: center;">
        {{ 'customer.dashboard.sales.columns.date' | t }}
      </th>
      <th rowspan="2" style="text-align: center;">
        {{ 'customer.dashboard.sales.columns.commission' | t }}
      </th>
    </tr>
    <tr>
      <th></th>
      <th>
        {{ 'customer.dashboard.sales.columns.product' | t }}
      </th>
      <th>
        {{ 'customer.dashboard.sales.columns.count' | t }}
      </th>
      <th>
        {{ 'customer.dashboard.sales.columns.price' | t }}
      </th>
      <th>
        {{ 'customer.dashboard.sales.columns.revenue' | t }}
      </th>
    </tr>
    </thead>

    <tbody data-product-id="{{ item.uniqid }}" class="sellix-customer-table-body">
    {% for item in salesList.slice(offset, limit) %}
      {% set index = loop.index %}
      {% render_snippet 'Customer Sales Table Row', invoice=item, theme=theme, isOdd=index % 2 %}
    {% endfor %}
    </tbody>

  </table>
{% endif %}
