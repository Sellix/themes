{% set id = uid() %}
{% set shop = global.common.shopInfo.shop %}
{% set customerInfo = global.common.customerInfo.customer %}
{% set currentUrl = global.common.currentUrl %}
{% set colors = themeProperties.current_colors %}
{% set backgroundColor = properties.header_background_color if properties.header_background_color is defined else 'background_main_color' %}

<header style="background-color: {{ colors[backgroundColor] }}">
  <div class="sellix-header" id="sellix-header-{{ id }}">

    <div style="display: flex; align-items: center; width: 100%; height: 100%; padding: 0 1rem;">

      {% if properties.logo_image %}
        <a href="/">
          <div class="sellix-header-logo-image">
            <img style="max-height: {{ properties.logo_image_height }}px;" src="{{ properties.logo_image }}" alt="{{ shop.name }}">
          </div>
        </a>
      {% endif %}

      <div class="sellix-header-shop-name" style="text-align: {{ properties.shop_name_text_align }};{{ 'left: 0;position: absolute;' if properties.shop_name_text_align == 'center' }}">
        <a href="/" style="width: 230px;align-items: center;height: 100%;padding: 0 1rem 0 0;">
          <span style="color: {{ colors[properties.shop_name_font_color] if properties.shop_name_font_color else 'inherit' }}; font-size: {{ properties.shop_name_font_size }}px; font-weight: {{ properties.shop_name_font_weight }};">
            {% if properties.shop_name %}
              {{ properties.shop_name }}
            {% else %}
              {{ shop.name }}
            {% endif %}
          </span>
        </a>
      </div>

      <div class="sellix-header-mobile-menu-container">
        <div class="sellix-header-mobile-menu-icon">|||</div>
        <div class="sellix-header-mobile-menu">
          <div class="menu-dropdown mobile-menu-dropdown customFadeIn">

            <div class="menu-dropdown-header unselectable">
              <div>{{ customerInfo.name }} {{ customerInfo.surname }}</div>
            </div>

            {% render_snippet 'Customer Menu Links' %}

            <div class="menu-dropdown-body">
              {% render_snippet 'Customer Menu User Details' %}
            </div>

            <div class="menu-dropdown-footer">
              <button class="sellix-menu-clear-button unselectable">
                {% render_snippet 'Customer Menu Logout Icon' %}
                Logout
              </button>
            </div>
          </div>
        </div>
      </div>


      <div class="sellix-header-menu">
        {% render_snippet 'Customer Menu Links' %}
      </div>

      <div class="sellix-header-user">
        <div class="sellix-header-user-info">
          <div class="sellix-header-user-info-icon" style="text-transform: uppercase;">
            {{ customerInfo.name.slice(0, 1) if customerInfo.name else "" }}
          </div>
          <div>
            <div class="sellix-header-user-info-name">{{ customerInfo.name }} {{ customerInfo.surname }}</div>
            <div class="sellix-header-user-info-email">{{ customerInfo.email }}</div>
          </div>
        </div>

        <div class="menu-dropdown customFadeIn">
          <div class="menu-dropdown-header unselectable">
            <div>{{ customerInfo.name }} {{ customerInfo.surname }}</div>
          </div>

          <div class="menu-dropdown-body">
            {% render_snippet 'Customer Menu User Details' %}
          </div>

          <div class="menu-dropdown-footer">
            <button class="sellix-menu-clear-button unselectable">
              {% render_snippet 'Customer Menu Logout Icon' %}
              Logout
            </button>
          </div>
        </div>
      </div>

    </div>


  </div>
</header>

<script type='application/javascript'>
  $(document).ready(function () {

    const customerMenuComponent = new SellixCustomerMenuComponent('.sellix-header-user', '.sellix-header-mobile-menu-container');

    $(document).find('.menu-dropdown-footer').on('click', function() {
      customerMenuComponent.logout();
    });
  });
</script>
