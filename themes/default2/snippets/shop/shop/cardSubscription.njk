{% set id = uid() %}
{% set product = args.product %}
{% set isPlaceholder = not product.image_name %}
{% set image = cdn_link(product.cloudflare_image_id, 'shopItem') %}
{% set colors = themeProperties.current_colors %}
{% set cardsProps = themeProperties.cards %}

{% set localClass = ['snippet-card-product-', id] | join %}
{% set globalClass =  'sellix-product-card' %}

<style>
  .{{ localClass }}__container {
    border: {{ "1px solid var(--borderColor)" if cardsProps.product_card_show_border else "none" }};
  }
  .{{ localClass }}__card {
    background: {{ colors[cardsProps.product_card_background_color] }};
  }
  .{{ localClass }}__title {
    color: {{ colors[cardsProps.product_card_title_font_color] }};
    font-size: {{ cardsProps.product_card_title_font_size }}px;
    font-weight: {{ cardsProps.product_card_title_font_weight }};
    line-height: {{ cardsProps.product_card_title_line_height }}%;
    justify-content: {{ cardsProps.product_card_title_text_align }} !important;
  }
  .{{ localClass }}__description {
    color: {{ colors[cardsProps.product_card_description_font_color] }};
    font-size: {{ cardsProps.product_card_description_font_size }}px;
    font-weight: {{ cardsProps.product_card_description_font_weight }};
  }
  .{{ localClass }}__price {
    color: {{ colors[cardsProps.product_card_price_font_color] }};
    font-size: {{ cardsProps.product_card_price_font_size }}px;
    font-weight: {{ cardsProps.product_card_price_font_weight }};
  }
</style>

<div class="{{ globalClass }} d-flex w-100 position-relative">
  {% render_snippet 'Discount badge', product=product %}
  <a
    href="{{'javascript:void' if product.on_hold | int else ['product/', product.uniqid] | join}}"
    id="sellix-card-container-{{id}}"
    class="{{ globalClass }}__container {{ localClass }}__container"
  >
    <div class="{{ globalClass}}__card {{ localClass }}__card unselectable">
      <div class="{{ globalClass }}__badge">
        {{ 'shop.shared.titles.productType.subscription' | t }}
      </div>

      <div class="{{ globalClass }}__image {{'placeholder' if isPlaceholder else ''}}">
        {% if isPlaceholder %}
          <i class="fa-light fa-recycle"></i>
        {% else %}
          <img src="{{image}}" alt="{{title}}" loading="lazy" />
        {% endif %}
      </div>

      <div class="{{ globalClass }}__info">
        <div
          class="{{ globalClass }}__title {{ localClass }}__title {{'justify-content-center text-center' if args.centerProduct else ''}}"
        >
          {{product.title}}
        </div>

        {% if product.on_hold | int %}
          <span class="{{ globalClass }}__description {{ localClass }}__description">
            {{ 'shop.main.cards.subscription.onHold' | t }}
          </span>
        {% else %}
          <div class="{{ globalClass }}__description {{ localClass }}__description justify-content-start">
            <span class="sellix-card-stock">{{ 'shop.shared.titles.startingAt' | t }}: </span>

            <span class="{{ localClass }}__price">
              {{global.config.CURRENCY_LIST[product.currency]}}{{product.price_display}}
            </span>
          </div>
        {% endif %}
      </div>
    </div>
  </a>
</div>
