{% set id = uid() %}
{% set shop = global.common.shopInfo.shop %}
{% set product = args.product %}
{% set colors = themeProperties.current_colors %}

{% set titleFontColor = safe_get(properties.title_font_color, 'dark_font_color') %}
{% set titleFontSize = safe_get(properties.title_font_size, 32) %}
{% set titleFontWeight = safe_get(properties.title_font_weight, 500) %}
{% set titleLineHeight = safe_get(properties.title_line_height, 48) %}

{% set globalClass = ['snippet-product-info'] %}
{% set localClass = [globalClass, '-', id] | join %}

<style>
  .{{ localClass }}__title {
    color: {{ colors[titleFontColor] }};
    font-size: {{ titleFontSize }}px;
    font-weight: {{ titleFontWeight }};
    line-height: {{ titleLineHeight }}px;
  }
  .{{ localClass }}__rating {
    color: {{ colors[titleFontColor] }};
  }
</style>

<div class="{{ globalClass }} {{ localClass }}">
  <div class="{{ globalClass }}__title {{ localClass }}__title">
    {% if product.title %}
      {{product.title}}
    {% else %}
      {% if invoice and invoice.developer_invoice %}
        {{invoice.developer_title}}
      {% else %}
        {{''}}
      {% endif %}
    {% endif %}
  </div>

  {% if product.type === 'SUBSCRIPTION' %}
    <div class="{{ globalClass }}__tags {{ localClass }}__tags">
      {% render_snippet 'Tag', tag=('shop.shared.titles.productType.subscription' | t) %}
    </div>
  {% endif %}

  <div class="{{ globalClass }}__rating {{ localClass }}__rating">
    {% if product.sold_count and product.average_score %}
      <div class="{{ globalClass }}__rating-stars {{ localClass }}__rating-stars">
        {% render_snippet
          'Rating star',
          rating=product.average_score,
          size=16,
          iconsCount=5,
          color=colors[titleFontColor]
        %}
      </div>
      <div class="{{ globalClass }}__rating-score {{ localClass }}__rating-score">
        {{ product.average_score | float | round(1) | to_fixed(1) }}
        <span class="reviews-count">({{ 'shop.shared.reviews.reviewsWithCount' | t({count: product.feedback.total}) }})</span>
      </div>
    {% endif %}
  </div>
</div>
