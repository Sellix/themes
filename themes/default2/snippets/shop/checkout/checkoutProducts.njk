{% set id = uid() %}
{% set shop = global.common.shopInfo.shop %}
{% set invoice = args.invoice %}
{% set products = args.products %}
{% set properties = args.properties %}

{% set globalClass = ['snippet-checkout-products'] %}
{% set localClass = [globalClass, '-', id] | join %}

<div class="{{ globalClass }} {{ localClass }}">
  {% for product in products %}
    {% render_snippet
      'Checkout: Product',
      product=product,
      invoice=invoice,
      quantity=product.quantity,
      properties=properties
    %}
  {% endfor %}
</div>

<script type='application/javascript'>
  $(document).ready(function () {
    const cart = window.SellixCartStoreFactory.getCart('{{shop.name}}');
    new SellixCheckoutProductsComponent(
      '.{{ localClass }}',
      cart,
      {{renderOptions | dump | safe}},
      {{properties | dump | safe}},
    );
  });
</script>
