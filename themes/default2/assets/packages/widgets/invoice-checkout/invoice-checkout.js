var InvoiceCheckout=function(e,t,a,n){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=l(t),o=l(a),s=l(n);function i(){const[e,a]=t.useState(null),n=()=>{a(window.innerWidth<=768)};return t.useEffect((()=>{a(window.innerWidth<=768)}),[]),t.useEffect((()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)})),[]),e}const c={modalVisible:!1,toggleTrackModal:()=>{},toggleDetailsModal:()=>{},closeAnyModal:()=>{},trackModal:!1,detailsModal:!1},d=r.default.createContext(c),u=()=>t.useContext(d);function m({children:e}){const[a,n]=t.useState(!1),[l,o]=t.useState(!1),s=a||l,i=()=>{l||n(!1),o(!l)},c=()=>{a||o(!1),n(!a)};return r.default.createElement(d.Provider,{value:{modalVisible:s,trackModal:a,detailsModal:l,toggleTrackModal:c,toggleDetailsModal:i,closeAnyModal:()=>{a?c():l&&i()}}},e)}const f={i18n:{t:e=>e}},p=r.default.createContext(f),h={i18n:{t:e=>e}};function y({children:e,i18n:t}){return r.default.createElement(p.Provider,{value:{i18n:t||h.i18n}},e)}const E={config:{},options:{},theme:{},shop:{},invoiceId:null,invoice:{},onGetInvoice:()=>{},onUpdateInvoice:()=>{},onGetFeedback:()=>{},onCreateFeedback:()=>{},onPostCashAppIdentifier:()=>{},onGetStripeLink:()=>{},onGetProductStripeLink:()=>{},onShowMessage:()=>{},sellixI18Next:{t:e=>e}},b=r.default.createContext(E),v=()=>t.useContext(b),g=({config:e,options:t,theme:a,shop:n,invoiceId:l,invoice:o,onGetInvoice:s,onUpdateInvoice:i,onGetFeedback:c,onCreateFeedback:d,onPostCashAppIdentifier:u,onGetStripeLink:m,onGetProductStripeLink:f,onShowMessage:p,sellixI18Next:h,children:v})=>r.default.createElement(b.Provider,{value:{config:e||E.config,options:t||E.options,theme:a||E.theme,shop:n||E.shop,invoiceId:l||E.invoiceId,invoice:o||E.invoice,onGetInvoice:s||E.onGetInvoice,onUpdateInvoice:i||E.onUpdateInvoice,onGetFeedback:c||E.onGetFeedback,onCreateFeedback:d||E.onCreateFeedback,onPostCashAppIdentifier:u||E.onPostCashAppIdentifier,onGetStripeLink:m||E.onGetStripeLink,onGetProductStripeLink:f||E.onGetProductStripeLink,onShowMessage:p||E.onShowMessage}},r.default.createElement(y,{i18n:h},v)),C={stripeAvailable:[],loading:!1,setLoading:()=>{},manualSuccess:!1,setManualSuccess:()=>{},paymentOptions:[],getInvoice:()=>{},setGateway:()=>{},gateway:"",setAPM:()=>{},APM:!1,invoiceInfo:{},isOpenGateways:!1,cashAppStep:!1,setCashAppStep:()=>{},isCashApp:!1,isBinance:!1,payPalEmailDelivery:!1,setPayPalEmailDelivery:()=>{},loader:!1,timeUp:!1,setTimeUp:()=>{},showGateways:()=>{},setLoader:()=>{},stripeForm:!1,hideScrollHelp:!1,setScrollHelp:()=>{},getFeesAmount:()=>{}},w=r.default.createContext(C),k=()=>t.useContext(w);function N({children:e}){const{config:a,theme:n,invoiceId:l,invoice:o,onGetInvoice:s}=v(),i=t.useMemo((()=>o||{product:{}}),[o]);let[c,d]=t.useState(null),[u,m]=t.useState(!1),[f,p]=t.useState(null),[h,y]=t.useState(!1),[E,b]=t.useState(!1),[g,C]=t.useState(!1),[k,N]=t.useState(!1),[O,_]=t.useState(!1),[S,P]=t.useState(i),[I,A]=t.useState(null);const[x,T]=t.useState(!1),D=n.isDark;let R="CASH_APP"===S.gateway&&["PENDING","PARTIAL"].includes(S.status),M="BINANCE"===S.gateway,L=S&&"SUBSCRIPTION"===S.type,B=S&&"PRODUCT_SUBSCRIPTION"===S.type,$=S&&"SHOPPING_CART"===S.type;const F=t.useCallback((e=>{const n=function(e,a,n){return t.useMemo((()=>{if(0===(n||[]).length)return{};const t=n[0];return Object.fromEntries(t.payment_gateways_fees.map((t=>{let l;switch(t.active_type){case"FIXED":const r=e.CURRENCY_LIST[a],o=+(t.conversions?t.conversions[a]:0)/n.length;l={gateway:t.gateway,type:"FIXED",value:o,currency:a,title:`${t.fixed_amount>0?"+":""}${r}${parseFloat(o).toFixed(2)}`,calculate:e=>e+o};break;case"PERCENT":l={gateway:t.gateway,type:"PERCENT",value:t.percent_amount,title:`${t.percent_amount>0?"+":""}${t.percent_amount}%`,calculate:e=>e+e*t.percent_amount/100}}return[l.gateway,l]})))}),[e.CURRENCY_LIST,n])}(a,S.currency,[S]),l=n[e];return l?`${l.title} usage fees`:""}),[S]),U=t.useCallback((e=>s(l).then((({data:{invoice:t}})=>{e||d(t.gateway),P(t),(["COMPLETED","VOIDED","REVERSED","REFUNDED"].includes(t.status)||k)&&clearInterval()})).catch((e=>{e&&e.status,console.error(e)})).finally((()=>_(!1)))),[d,P]);t.useEffect((()=>{U(!1)}),[k]),t.useEffect((()=>{S.gateway?C(!1):O||void 0===S.gateway||C(!0)}),[S.gateway,O]),t.useEffect((()=>{let e=setInterval((()=>{U(!0)}),2e4);return()=>{clearInterval(e)}}),[]),t.useEffect((()=>{_(!0),U(!1)}),[]);let{gateways_available:G,shop_paypal_credit_card:j}=S,H=[];G&&G.length&&(H=G.filter((e=>""!==e))||[],H.length&&H.includes("PAYPAL")&&+j&&H.push("PAYPAL_CREDIT_CARD"),H.includes("STRIPE")&&(H=H.filter((e=>"PAYPAL_CREDIT_CARD"!==e))));let W=(S.available_stripe_apm||[]).map((({id:e})=>a.STRIPE_APM_PARSE[e]));const q=function(e,a,n){const[l,r]=t.useState({name:"",surname:"",address_line1:"",address_city:"",address_country:"",address_postal_code:"",address_state:""}),o=t.useMemo((()=>(e||[]).filter((({country_regulations:e})=>e)).map((({country_regulations:e})=>e))),[e]),s="STRIPE"===a&&o.length,i=t.useMemo((()=>n||o.includes("IN")),[o,n,a]);let c;return c=i?l.name&&l.surname&&l.address_line1&&l.address_city&&l.address_country&&l.address_postal_code&&l.address_state:l.name&&l.surname,{stripeData:l,setStripeData:r,isVisibleStripeForm:s,isStripeFormValid:c,isExtendedStripeForm:i}}([S],c,f);let V=["PARTIAL","PENDING"].includes(S.status);return r.default.createElement(w.Provider,{value:{stripeAvailable:W,loading:O,setLoading:_,manualSuccess:k,setManualSuccess:N,paymentOptions:H,getInvoice:U,setGateway:d,getFeesAmount:F,gateway:c,setAPM:p,APM:f,hideInfo:V,isDark:D,invoiceInfo:S,isOpenGateways:g,isCashApp:R,isBinance:M,payPalEmailDelivery:E,setPayPalEmailDelivery:b,loader:h,showGateways:C,setLoader:y,timeUp:u,setTimeUp:m,cashAppStep:I,setCashAppStep:A,hideScrollHelp:x,setScrollHelp:T,stripeForm:q,isSubscription:L,isCart:$,isProductSubscription:B}},e)}const O=({width:e=20,height:t=20,className:a,style:n})=>r.default.createElement("svg",{width:e,height:t,className:a,style:n,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M4.16675 10H15.8334",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.default.createElement("path",{d:"M10.8333 15L15.8333 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.default.createElement("path",{d:"M10.8333 5L15.8333 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),_=({width:e=20,height:t=20,className:a,style:n})=>r.default.createElement("svg",{width:e,height:t,className:a,style:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M15.0001 6.66667H8.33341C7.41294 6.66667 6.66675 7.41286 6.66675 8.33333V15C6.66675 15.9205 7.41294 16.6667 8.33341 16.6667H15.0001C15.9206 16.6667 16.6667 15.9205 16.6667 15V8.33333C16.6667 7.41286 15.9206 6.66667 15.0001 6.66667Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.default.createElement("path",{d:"M13.3333 6.66667V5C13.3333 4.55797 13.1577 4.13405 12.8451 3.82149C12.5325 3.50893 12.1086 3.33333 11.6666 3.33333H4.99992C4.55789 3.33333 4.13397 3.50893 3.82141 3.82149C3.50885 4.13405 3.33325 4.55797 3.33325 5V11.6667C3.33325 12.1087 3.50885 12.5326 3.82141 12.8452C4.13397 13.1577 4.55789 13.3333 4.99992 13.3333H6.66659",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),S=({width:e=20,height:t=20,className:a,style:n})=>r.default.createElement("svg",{width:e,height:t,className:a,style:n,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M15 5L5 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.default.createElement("path",{d:"M5 5L15 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),P=()=>r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 900 1000"},r.default.createElement("g",null,r.default.createElement("path",{d:"M265.7,266.8l263-87.8L511,253.8c22.8,5.4,47.6,12.6,75,22.4c60.8,21.7,115.9,46.9,165.4,75.5l109.4-230.5 c-52.1-33-113.5-59.5-184.3-79.4c-70.8-20-141.7-30-212.9-30c-78.1,0-146.7,12.2-205.8,36.5c-59.1,24.3-104.6,59.3-136.7,104.8 C89,198.8,72.9,252,72.9,312.7c0,62.5,15.6,112.4,46.9,149.8c31.2,37.3,68.3,64.9,111.3,82.7c43,17.8,96.6,34.9,160.8,51.4 c17.3,4.3,32.6,8.4,46.9,12.6l17-71.9l204.3,160.9l-262.9,87.8l14.1-59.8c-33.8-6.8-71.1-18-113.1-35.1 C228.8,662.8,171,628.7,125,588.8L13,816.7c59.9,46,130.9,82.2,213,108.7c82,26.5,163.4,39.7,244.1,39.7 c71.2,0,135.9-10.9,194.1-32.6c58.2-21.7,104.4-54.9,138.7-99.6c34.3-44.7,51.5-100,51.5-166c0-64.3-16.1-116.1-48.2-155.6 c-32.1-39.5-69.7-68.4-112.7-86.6c-43-18.2-97-36.5-162.1-54.7c-16.5-4.4-31-8.6-44.7-12.7L470,427.7L265.7,266.8z",fill:"#1f1f1f"}))),I=()=>r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 900 1000"},r.default.createElement("g",null,r.default.createElement("path",{className:"loader-logo-light",d:"M265.7,266.8l263-87.8L511,253.8c22.8,5.4,47.6,12.6,75,22.4c60.8,21.7,115.9,46.9,165.4,75.5l109.4-230.5 c-52.1-33-113.5-59.5-184.3-79.4c-70.8-20-141.7-30-212.9-30c-78.1,0-146.7,12.2-205.8,36.5c-59.1,24.3-104.6,59.3-136.7,104.8 C89,198.8,72.9,252,72.9,312.7c0,62.5,15.6,112.4,46.9,149.8c31.2,37.3,68.3,64.9,111.3,82.7c43,17.8,96.6,34.9,160.8,51.4 c17.3,4.3,32.6,8.4,46.9,12.6l17-71.9l204.3,160.9l-262.9,87.8l14.1-59.8c-33.8-6.8-71.1-18-113.1-35.1 C228.8,662.8,171,628.7,125,588.8L13,816.7c59.9,46,130.9,82.2,213,108.7c82,26.5,163.4,39.7,244.1,39.7 c71.2,0,135.9-10.9,194.1-32.6c58.2-21.7,104.4-54.9,138.7-99.6c34.3-44.7,51.5-100,51.5-166c0-64.3-16.1-116.1-48.2-155.6 c-32.1-39.5-69.7-68.4-112.7-86.6c-43-18.2-97-36.5-162.1-54.7c-16.5-4.4-31-8.6-44.7-12.7L470,427.7L265.7,266.8z",fill:"white"})));function A(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===a&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}A("");const x=()=>{const{config:e}=v(),{invoiceInfo:t,isSubscription:a,isCart:n}=k(),{discount_breakdown:l}=t,o=e.CURRENCY_LIST[t.currency];let s=[];return n?t.products.map((e=>{s.push({title:e.title,uniqid:e.uniqid,quantity:e.unit_quantity,originalPrice:e.price_display})})):s.push({title:a&&t.title||(t.product||{}).title,uniqid:t.product_id,quantity:t.quantity,originalPrice:a&&t.total_display||(t.product||{}).price_display}),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"calculation"},s.map((({title:e,quantity:t,originalPrice:a},n)=>r.default.createElement("div",{className:"calculation-item",style:s.length-1===n?{marginBottom:0}:{}},r.default.createElement("div",null,r.default.createElement("span",null,t,"x ")," ",r.default.createElement("span",{style:{color:"var(--black9)"}},e)),r.default.createElement("div",null,o,Number(a).toFixed(2))))),a?null:r.default.createElement("div",{className:"calculation-line"})),l&&r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Subtotal"),r.default.createElement("div",null,o,Number(s.reduce(((e,{quantity:t,originalPrice:a})=>e+t*a),0)).toFixed(2))),s.map((({uniqid:e,title:t})=>{if(l.price_discount[e]&&l.price_discount[e].percentage)return r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Product Discount ",n?`(${t})`:""),r.default.createElement("div",null,"-",l.price_discount[e].percentage,"%"))})),s.map((({uniqid:e,title:a})=>{if(l.addons[e])return l.addons[e].map((({price_display:l})=>{let s=t.addons&&t.addons[e]&&t.addons[e][0].title;return r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,s||"Addon"," ",n?`(${a})`:""),r.default.createElement("div",null,"+",o,Number(l).toFixed(2)))}))})),s.map((({uniqid:e,title:t})=>{if(l.volume_discounts[e]){const{amount:a,type:s,percentage:i}=l.volume_discounts[e];if(a)return"FIXED"===s?r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Volume Discount ",n?`(${t})`:""),r.default.createElement("div",null,"-",o,Number(i).toFixed(2))):r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Volume Discount ",n?`(${t})`:""),r.default.createElement("div",null,"-",i,"%"))}})),t.bundles&&t.bundles.length&&(t.bundles||[]).map((({title:e,id:t,discount_amount:a,discount_type:l})=>r.default.createElement("div",{className:"calculation-item",key:t},r.default.createElement("div",null,"Bundle Discount ",n?`(${e})`:""),r.default.createElement("div",null,"-","FIXED"===l?`${o}${Number(a).toFixed(2)}`:`${a}%`)))),l.coupon&&l.coupon.amount&&r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Coupon"),r.default.createElement("div",null,"-","FIXED"===l.coupon.type?`${o}${Number(l.coupon.percentage).toFixed(2)}`:`${Number(l.coupon.percentage).toFixed(0)}%`)),l.gateway_fee&&l.gateway_fee.amount&&r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Gateway Fees (",e.PAYMENT_FULL_NAME[t.gateway],")"),r.default.createElement("div",null,"+","FIXED"===l.gateway_fee.type?`${o}${Number(l.gateway_fee.amount).toFixed(2)}`:`${Number(l.gateway_fee.amount).toFixed(0)}%`)),l.tax&&l.tax.percentage&&r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Tax"),r.default.createElement("div",null,"+",Number(l.tax.percentage).toFixed(0),"%")),l.affiliate_revenue&&l.affiliate_revenue.total_display&&r.default.createElement("div",{className:"calculation-item"},r.default.createElement("div",null,"Used From Balance"),r.default.createElement("div",null,"-",o,Number(l.affiliate_revenue.total_display).toFixed(2)))),r.default.createElement("div",{className:"calculation-item total"},r.default.createElement("div",null,"Total"),r.default.createElement("div",null,o,t&&t.total_conversions&&t.total_conversions[t.currency])))};var T={},D=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}},R={"text/plain":"Text","text/html":"Url",default:"Text"};var M=function(e,t){var a,n,l,r,o,s,i=!1;t||(t={}),a=t.debug||!1;try{if(l=D(),r=document.createRange(),o=document.getSelection(),(s=document.createElement("span")).textContent=e,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var l=R[t.format]||R.default;window.clipboardData.setData(l,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(s),r.selectNodeContents(s),o.addRange(r),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");i=!0}catch(l){a&&console.error("unable to copy using execCommand: ",l),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),i=!0}catch(l){a&&console.error("unable to copy using clipboardData: ",l),a&&console.error("falling back to prompt"),n=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(n,e)}}finally{o&&("function"==typeof o.removeRange?o.removeRange(r):o.removeAllRanges()),s&&document.body.removeChild(s),l()}return i};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}Object.defineProperty(T,"__esModule",{value:!0}),T.CopyToClipboard=void 0;var B=U(r.default),$=U(M),F=["text","onCopy","options","children"];function U(e){return e&&e.__esModule?e:{default:e}}function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){Z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=K(e);if(t){var l=K(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return z(this,a)}}function z(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(r,e);var t,a,n,l=Y(r);function r(){var e;W(this,r);for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return Z(X(e=l.call.apply(l,[this].concat(a))),"onClick",(function(t){var a=e.props,n=a.text,l=a.onCopy,r=a.children,o=a.options,s=B.default.Children.only(r),i=(0,$.default)(n,o);l&&l(n,i),s&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t)})),e}return t=r,(a=[{key:"render",value:function(){var e=this.props;e.text,e.onCopy,e.options;var t=e.children,a=H(e,F),n=B.default.Children.only(t);return B.default.cloneElement(n,j(j({},a),{},{onClick:this.onClick}))}}])&&q(t.prototype,a),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(B.default.PureComponent);T.CopyToClipboard=J,Z(J,"defaultProps",{onCopy:void 0,options:void 0});var Q=T.CopyToClipboard;Q.CopyToClipboard=Q;var ee=Q;const te=({text:e="",onCopy:t,children:a,className:n})=>r.default.createElement(ee.CopyToClipboard,{text:e,onCopy:t},r.default.createElement("span",{className:`cursor-pointer ${n||""}`},a||e));A("");const ae=({skipTitle:e})=>{const{config:a}=v(),n={},l=t.useMemo((()=>{let e="";return n&&(+n.developer_invoice?e=n.developer_title:n.product&&(e=n.product.title)),e}),[n]),o=t.useMemo((()=>"COMPLETED"===n.status),[n]),s=t.useMemo((()=>((e,{id:t,type:a,isDark:n})=>t?`https://imagedelivery.net/${e.CLOUD_FIRE_ID}/${t}/${a?a.toLowerCase():"default"}`:n?I:P)(a,{id:n.shop_cloudflare_image_id,type:"shopItem"})),[n]);return r.default.createElement(r.default.Fragment,null,n.shop_cloudflare_image_id?r.default.createElement("div",{className:"checkout-details-logo"},r.default.isValidElement(logo)?r.default.createElement(s,null):r.default.createElement("img",{src:s,alt:""})):null,e?null:r.default.createElement("div",{className:"checkout-details-title"},r.default.createElement(r.default.Fragment,null,l),o&&r.default.createElement("div",{className:"checkout-details-title-completed"},"Your Order is Completed!"),o&&r.default.createElement("div",{className:"checkout-details-title-id"},n.uniqid,r.default.createElement(te,{text:n.uniqid},r.default.createElement(_,null)))),r.default.createElement("div",{className:"checkout-details "+(e?"mt-3":"")},o?null:r.default.createElement(x,null)))};function ne(){return ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ne.apply(this,arguments)}const le=({gateway:e,tx:t,small:a,blockchain:n})=>{if(!e||!t)return null;if(("USDC"===e||"USDT"===e)&&n)return"ERC20"===n?r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://etherscan.io/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t):"TRC20"===n?r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://tronscan.io/#/transaction/${t}`,target:"blank"},a?t.slice(0,15)+"...":t):"BEP20"===n?r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://bscscan.com/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t):r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://polygonscan.com/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);if("PLZ"===e&&n){if("TRC20"===n)return r.default.createElement("a",{style:{wordBreak:"break-all"},href:` https://tronscan.io/#/transaction/${t}`,target:"blank"},t);if("BEP20"===n)return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://bscscan.com/tx/${t}`,target:"blank"},t)}switch(e){case"BITCOIN":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://www.blockchain.com/btc/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"POLYGON":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://polygonscan.com/tx/${t}`,target:"blank"},t);case"LITECOIN":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://blockchair.com/litecoin/transaction/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"TRON":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://tronscan.io/#/transaction/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"NANO":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://nanocrawler.cc/explorer/block/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"MONERO":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://blockchair.com/it/monero/transaction/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"BITCOIN_CASH":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://blockchair.com/bitcoin-cash/transaction/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"SOLANA":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://explorer.solana.com/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"RIPPLE":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://livenet.xrpl.org/transactions/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"ETHEREUM":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://etherscan.io/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"BINANCE_COIN":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://bscscan.com/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"CRONOS":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://cronoscan.com/tx/${t}`,target:"blank"},a?t.slice(0,15)+"...":t);case"CONCORDIUM":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://ccdscan.io/?dcount=2&dentity=transaction&dhash=${t}`,target:"blank"},a?t.slice(0,15)+"...":t)}};A("");const re=({status_history:e,gateway:t,blockchain:a,crypto_address:n,crypto_transactions:l,index:o})=>{const{config:s}=v();return"WAITING_FOR_CONFIRMATIONS"!==e[o].status?null:r.default.createElement("div",null,r.default.createElement("div",{className:"w-100 mb-2"},r.default.createElement("div",{className:"d-info"},r.default.createElement("p",{className:"d-addr mb-0"},r.default.createElement("label",{className:"mb-0"},r.default.createElement("b",null,"BITCOIN_LN"===t?"Payment Request":`${s.PAYMENT_FULL_NAME[t]} Address`,":")),(({gateway:e,address:t,blockchain:a})=>{if(!e||!t)return null;if(("USDC"===e||"USDT"===e)&&a)return"ERC20"===a?r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://etherscan.io/address/${t}`,target:"blank"},t):"TRC20"===a?r.default.createElement("a",{style:{wordBreak:"break-all"},href:` https://tronscan.io/#/address/${t}`,target:"blank"},t):"BEP20"===a?r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://bscscan.com/address/${t}`,target:"blank"},t):r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://polygonscan.com/address/${t}`,target:"blank"},t);if("PLZ"===e&&a){if("TRC20"===a)return r.default.createElement("a",{style:{wordBreak:"break-all"},href:` https://tronscan.io/#/address/${t}`,target:"blank"},t);if("BEP20"===a)return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://bscscan.com/address/${t}`,target:"blank"},t)}switch(e){case"BITCOIN":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://www.blockchain.com/btc/address/${t}`,target:"blank"},t);case"LITECOIN":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://blockchair.com/litecoin/address/${t}`,target:"blank"},t);case"NANO":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://nanocrawler.cc/explorer/account/${t}/history`,target:"blank"},t);case"TRON":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:` https://tronscan.io/#/address/${t}`,target:"blank"},t);case"MONERO":case"BITCOIN_LN":return t;case"CONCORDIUM":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://ccdscan.io/?dcount=1&dentity=account&daddress=${t}`,target:"blank"},t);case"BITCOIN_CASH":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://blockchair.com/bitcoin-cash/address/${t}`,target:"blank"},t);case"SOLANA":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://explorer.solana.com/address/${t}`,target:"blank"},t);case"RIPPLE":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://livenet.xrpl.org/accounts/${t}`,target:"blank"},t);case"ETHEREUM":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://etherscan.io/address/${t}`,target:"blank"},t);case"BINANCE_COIN":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://bscscan.com/address/${t}`,target:"blank"},t);case"POLYGON":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://polygonscan.com/address/${t}`,target:"blank"},t);case"CRONOS":return r.default.createElement("a",{style:{wordBreak:"break-all"},href:`https://cronoscan.com/address/${t}`,target:"blank"},t)}})({gateway:t,address:n,blockchain:a})))),r.default.createElement("div",{className:"w-100"},l&&l.map(((e,n)=>r.default.createElement("div",{className:"d-flex",key:n},r.default.createElement("p",{className:"hash mb-2",style:{lineHeight:"1rem"}},r.default.createElement("label",{className:"mb-0"},r.default.createElement("b",null,"Transactions:"))," ",r.default.createElement("br",null),r.default.createElement("span",null,Number(e.crypto_amount).toFixed(8)," - "),le({gateway:t,tx:e.hash,blockchain:a})))))))},oe=({status_history:e,index:t,gateway:a,blockchain:n})=>"Crypto Transactions"===e[t].status&&e[t].transactions&&e[t].transactions.length?r.default.createElement("div",{className:"w-100 mb-2"},r.default.createElement("div",{className:"d-info"},r.default.createElement("p",{className:"d-addr mb-0"},e[t].transactions.map((({confirmations:e,crypto_amount:t,hash:l})=>r.default.createElement("div",null,r.default.createElement("span",null,"Confirmations: ",r.default.createElement("b",null,e)),r.default.createElement("br",null),r.default.createElement("span",null,"Amount: ",r.default.createElement("b",null,t)),r.default.createElement("br",null),r.default.createElement("span",null,"Hash: ",r.default.createElement("b",{style:{wordBreak:"break-all"}},le({gateway:a,tx:l,blockchain:n}))))))))):null,se=({status_history:e,crypto_received:t,gateway:a,crypto_amount:n,index:l})=>"PARTIAL"!==e[l].status?null:r.default.createElement("div",{className:"w-100 mb-2"},r.default.createElement("div",{className:"d-info"},r.default.createElement("p",{className:"d-addr mb-0"},r.default.createElement("label",{className:"mb-0"},r.default.createElement("b",null,"Crypto Needed:")," ",(n-t).toFixed(8)," ",config.PAYMENT_OPTS[a]),r.default.createElement("br",null)))),ie=({invoiceInfo:e})=>{let t=Array(e.status_history.length).fill(0);if("COMPLETED"===e.status&&e.crypto_transactions.length){let t=e.status_history.pop();e.status_history=[...e.status_history,{id:1,created_at:1633201562,transactions:e.crypto_transactions,invoice_id:"ab878f-55f49b0071-87e9e0",status:"Crypto Transactions"},t]}return r.default.createElement("div",{className:"track"},r.default.createElement("div",{className:"track-line"},t.map((e=>r.default.createElement("div",{key:e})))),r.default.createElement("div",{className:"track-cards"},t.map(((t,a)=>r.default.createElement("div",{className:"track-card",key:a},r.default.createElement("div",{className:"track-card-badge"},"Crypto Transactions"===e.status_history[a].status&&e.status_history[a].transactions&&e.status_history[a].transactions.length?"Crypto Transactions":(e.status_history[a].status.replaceAll("_"," ")||"").toLowerCase()),r.default.createElement("div",{className:"track-card-description"},r.default.createElement(re,ne({},e,{index:a})),r.default.createElement(se,ne({},e,{index:a})),r.default.createElement(oe,ne({},e,{index:a})),e.status_history[a].details),"Crypto Transactions"===e.status_history[a].status&&e.status_history[a].transactions&&e.status_history[a].transactions.length?null:r.default.createElement("div",{className:"track-card-time"},o.default.unix(e.status_history[a].created_at).format("MMM DD, YYYY HH:mm")))))))},ce=()=>{const{invoiceInfo:e}=k(),{toggleTrackModal:t}=u();let{status:a,status_history:n}=e;return"VOIDED"===a&&n.length&&!n.find((({status:e})=>"VOIDED"===e))&&n.push({status:"VOIDED",details:"This invoice has been voided due to not receiving a payments within the 24 hours specified.",created_at:o.default.unix(n.find((({status:e})=>"PENDING"===e)).created_at).add(1,"day").unix()}),r.default.createElement("div",{className:"embed-track"},r.default.createElement("header",{className:"embed-info-header"},r.default.createElement("div",{className:"embed-info-header-title"},"Invoice Tracking"),r.default.createElement("div",{className:"embed-info-header-close",onClick:t},r.default.createElement(S,null))),r.default.createElement("div",{className:"embed-track-body"},n&&n.length?r.default.createElement(ie,{invoiceInfo:e}):r.default.createElement("div",{className:"no-track"},"Tracking is not available for old invoices.")))},de=()=>{const{toggleDetailsModal:e}=u(),{invoiceInfo:t}=k();let a="";t&&(+t.developer_invoice?a=t.developer_title:t.product&&(a=t.product.title));const n="SUBSCRIPTION"===t.type,l="SHOPPING_CART"===t.type,o="COMPLETED"===t.status;return r.default.createElement("div",null,r.default.createElement("header",{className:"embed-info-header"},r.default.createElement("div",{className:"embed-info-header-title"},!o&&n?r.default.createElement(r.default.Fragment,null,"Subscription ",t.subscription.name):l?r.default.createElement(r.default.Fragment,null,"Checkout Products"):r.default.createElement(r.default.Fragment,null,a),o&&r.default.createElement("div",{className:"checkout-details-title-completed"},"Your Order is Completed!"),o&&r.default.createElement("div",{className:"checkout-details-title-id"},t.uniqid,r.default.createElement(te,{text:t.uniqid},r.default.createElement(_,null)))),r.default.createElement("div",{className:"embed-info-header-close",onClick:()=>e(null)},r.default.createElement(S,null))))},ue=/input|select|textarea|button|object|iframe/;function me(e){const t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{const a=window.getComputedStyle(e);return t?"visible"!==a.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0:"none"==a.getPropertyValue("display")}catch(e){return console.warn("Failed to inspect element style"),!1}}function fe(e,t){const a=e.nodeName.toLowerCase();return(ue.test(a)&&!e.disabled||"a"===a&&e.href||t)&&function(e){let t=e,a=e.getRootNode&&e.getRootNode();for(;t&&t!==document.body;){if(a&&t===a&&(t=a.host.parentNode),me(t))return!1;t=t.parentNode}return!0}(e)}function pe(e){let t=e.getAttribute("tabindex");null===t&&(t=void 0);const a=isNaN(t);return(a||t>=0)&&fe(e,!a)}function he(e){return[].slice.call(e.querySelectorAll("*"),0).reduce(((e,t)=>e.concat(t.shadowRoot?he(t.shadowRoot):[t])),[]).filter(pe)}let ye=[],Ee=null,be=!1;function ve(){be=!0}function ge(){if(be){if(be=!1,!Ee)return;setTimeout((()=>{if(Ee.contains(document.activeElement))return;(he(Ee)[0]||Ee).focus()}),0)}}function Ce(e=document){return e.activeElement.shadowRoot?Ce(e.activeElement.shadowRoot):e.activeElement}function we(e,t){const a=he(e);if(!a.length)return void t.preventDefault();let n;const l=t.shiftKey,r=a[0],o=a[a.length-1],s=Ce();if(e===s){if(!l)return;n=o}if(o!==s||l||(n=r),r===s&&l&&(n=o),n)return t.preventDefault(),void n.focus();const i=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null!=i&&"Chrome"!=i[1]&&null==/\biPod\b|\biPad\b/g.exec(navigator.userAgent)){var c=a.indexOf(s);if(c>-1&&(c+=l?-1:1),n=a[c],void 0===n)return t.preventDefault(),n=l?o:r,void n.focus();t.preventDefault(),n.focus()}}var ke=!("undefined"==typeof window||!window.document||!window.document.createElement);const Ne={canUseDOM:ke,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:ke&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:ke&&!!window.screen}.canUseDOM;let Oe=null;function _e(e){let t=e;if("string"==typeof t&&Ne){const e=document.querySelectorAll(t);!function(e,t){if(!e||!e.length)throw new Error(`react-modal: No elements were found for selector ${t}.`)}(e,t),t=e}return Oe=t||Oe,Oe}function Se(e){const t=e||Oe;if(t)return Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t];throw Error(["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" "))}let Pe={},Ie={};const Ae=(e,t)=>{return a=e.classList,n="html"==e.nodeName.toLowerCase()?Pe:Ie,void t.split(" ").forEach((e=>{((e,t)=>{e[t]||(e[t]=0),e[t]+=1})(n,e),a.add(e)}));var a,n},xe=(e,t)=>{return a=e.classList,n="html"==e.nodeName.toLowerCase()?Pe:Ie,void t.split(" ").forEach((e=>{((e,t)=>{e[t]&&(e[t]-=1)})(n,e),0===n[e]&&a.remove(e)}));var a,n};let Te,De,Re=new class{constructor(){this.openInstances=[],this.subscribers=[]}register=e=>{-1===this.openInstances.indexOf(e)&&(this.openInstances.push(e),this.emit("register"))};deregister=e=>{const t=this.openInstances.indexOf(e);-1!==t&&(this.openInstances.splice(t,1),this.emit("deregister"))};subscribe=e=>{this.subscribers.push(e)};emit=e=>{this.subscribers.forEach((t=>t(e,this.openInstances.slice())))}},Me=[];function Le(){0!==Me.length&&Me[Me.length-1].focusContent()}Re.subscribe((function(e,t){Te||De||(Te=document.createElement("div"),Te.setAttribute("data-react-modal-body-trap",""),Te.style.position="absolute",Te.style.opacity="0",Te.setAttribute("tabindex","0"),Te.addEventListener("focus",Le),De=Te.cloneNode(),De.addEventListener("focus",Le)),Me=t,Me.length>0?(document.body.firstChild!==Te&&document.body.insertBefore(Te,document.body.firstChild),document.body.lastChild!==De&&document.body.appendChild(De)):(Te.parentElement&&Te.parentElement.removeChild(Te),De.parentElement&&De.parentElement.removeChild(De))}));const Be={overlay:"ReactModal__Overlay",content:"ReactModal__Content"};let $e=0;class Fe extends t.Component{static defaultProps={style:{overlay:{},content:{}},defaultStyles:{}};constructor(e){super(e),this.state={afterOpen:!1,beforeClose:!1},this.shouldClose=null,this.moveFromContentToOverlay=null}componentDidMount(){this.props.isOpen&&this.open()}componentDidUpdate(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}componentWillUnmount(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}setOverlayRef=e=>{this.overlay=e,this.props.overlayRef&&this.props.overlayRef(e)};setContentRef=e=>{this.content=e,this.props.contentRef&&this.props.contentRef(e)};beforeOpen(){const{appElement:e,ariaHideApp:t,htmlOpenClassName:a,bodyOpenClassName:n}=this.props;n&&Ae(document.body,n),a&&Ae(document.getElementsByTagName("html")[0],a),t&&($e+=1,function(e){for(let t of Se(e))t.setAttribute("aria-hidden","true")}(e)),Re.register(this)}afterClose=()=>{const{appElement:e,ariaHideApp:t,htmlOpenClassName:a,bodyOpenClassName:n}=this.props;n&&xe(document.body,n),a&&xe(document.getElementsByTagName("html")[0],a),t&&$e>0&&($e-=1,0===$e&&function(e){for(let t of Se(e))t.removeAttribute("aria-hidden")}(e)),this.props.shouldFocusAfterRender&&(this.props.shouldReturnFocusAfterClose?(!function(e=!1){let t=null;try{0!==ye.length&&(t=ye.pop(),t.focus({preventScroll:e}))}catch(e){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}(this.props.preventScroll),Ee=null,window.addEventListener?(window.removeEventListener("blur",ve),document.removeEventListener("focus",ge)):(window.detachEvent("onBlur",ve),document.detachEvent("onFocus",ge))):ye.length>0&&ye.pop()),this.props.onAfterClose&&this.props.onAfterClose(),Re.deregister(this)};open=()=>{var e;this.beforeOpen(),this.state.afterOpen&&this.state.beforeClose?(clearTimeout(this.closeTimer),this.setState({beforeClose:!1})):(this.props.shouldFocusAfterRender&&(e=this.node,Ee=e,window.addEventListener?(window.addEventListener("blur",ve,!1),document.addEventListener("focus",ge,!0)):(window.attachEvent("onBlur",ve),document.attachEvent("onFocus",ge)),ye.push(document.activeElement)),this.setState({isOpen:!0},(()=>{this.openAnimationFrame=requestAnimationFrame((()=>{this.setState({afterOpen:!0}),this.props.isOpen&&this.props.onAfterOpen&&this.props.onAfterOpen({overlayEl:this.overlay,contentEl:this.content})}))})))};close=()=>{this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout()};focusContent=()=>this.content&&!this.contentHasFocus()&&this.content.focus({preventScroll:!0});closeWithTimeout=()=>{const e=Date.now()+this.props.closeTimeoutMS;this.setState({beforeClose:!0,closesAt:e},(()=>{this.closeTimer=setTimeout(this.closeWithoutTimeout,this.state.closesAt-Date.now())}))};closeWithoutTimeout=()=>{this.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},this.afterClose)};handleKeyDown=e=>{9===e.keyCode&&we(this.content,e),this.props.shouldCloseOnEsc&&27===e.keyCode&&(e.stopPropagation(),this.requestClose(e))};handleOverlayOnClick=e=>{null===this.shouldClose&&(this.shouldClose=!0),this.shouldClose&&this.props.shouldCloseOnOverlayClick&&(this.ownerHandlesClose()?this.requestClose(e):this.focusContent()),this.shouldClose=null};handleContentOnMouseUp=()=>{this.shouldClose=!1};handleOverlayOnMouseDown=e=>{this.props.shouldCloseOnOverlayClick||e.target!=this.overlay||e.preventDefault()};handleContentOnClick=()=>{this.shouldClose=!1};handleContentOnMouseDown=()=>{this.shouldClose=!1};requestClose=e=>this.ownerHandlesClose()&&this.props.onRequestClose(e);ownerHandlesClose=()=>this.props.onRequestClose;shouldBeClosed=()=>!this.state.isOpen&&!this.state.beforeClose;contentHasFocus=()=>document.activeElement===this.content||this.content.contains(document.activeElement);buildClassName=(e,t)=>{const a="object"==typeof t?t:{base:Be[e],afterOpen:`${Be[e]}--after-open`,beforeClose:`${Be[e]}--before-close`};let n=a.base;return this.state.afterOpen&&(n=`${n} ${a.afterOpen}`),this.state.beforeClose&&(n=`${n} ${a.beforeClose}`),"string"==typeof t&&t?`${n} ${t}`:n};attributesFromObject=(e,t)=>Object.keys(t).reduce(((a,n)=>(a[`${e}-${n}`]=t[n],a)),{});render(){const{id:e,className:t,overlayClassName:a,defaultStyles:n,children:l}=this.props,r=t?{}:n.content,o=a?{}:n.overlay;if(this.shouldBeClosed())return null;const s={ref:this.setOverlayRef,className:this.buildClassName("overlay",a),style:{...o,...this.props.style.overlay},onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},i={id:e,ref:this.setContentRef,style:{...r,...this.props.style.content},className:this.buildClassName("content",t),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel,...this.attributesFromObject("aria",{modal:!0,...this.props.aria}),...this.attributesFromObject("data",this.props.data||{}),"data-testid":this.props.testId},c=this.props.contentElement(i,l);return this.props.overlayElement(s,c)}}const Ue=Ne&&void 0!==s.default.createPortal;let Ge=e=>document.createElement(e);const je=()=>Ue?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer;function He(e){return e()}class We extends t.Component{static defaultProps={isOpen:!1,portalClassName:"ReactModalPortal",bodyOpenClassName:"ReactModal__Body--open",role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:()=>document.body,overlayElement:(e,t)=>r.default.createElement("div",e,t),contentElement:(e,t)=>r.default.createElement("div",e,t)};static defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};static setAppElement(e){_e(e)}componentDidMount(){if(!Ne)return;Ue||(this.node=Ge("div")),this.node.className=this.props.portalClassName;He(this.props.parentSelector).appendChild(this.node),!Ue&&this.renderPortal(this.props)}getSnapshotBeforeUpdate(e){return{prevParent:He(e.parentSelector),nextParent:He(this.props.parentSelector)}}componentDidUpdate(e,t,a){if(!Ne)return;const{isOpen:n,portalClassName:l}=this.props;e.portalClassName!==l&&(this.node.className=l);const{prevParent:r,nextParent:o}=a;o!==r&&(r.removeChild(this.node),o.appendChild(this.node)),(e.isOpen||n)&&!Ue&&this.renderPortal(this.props)}componentWillUnmount(){if(!Ne||!this.node||!this.portal)return;const e=this.portal.state,t=Date.now(),a=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);a?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,a-t)):this.removePortal()}removePortal=()=>{!Ue&&s.default.unmountComponentAtNode(this.node);const e=He(this.props.parentSelector);e&&e.contains(this.node)?e.removeChild(this.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')};portalRef=e=>{this.portal=e};renderPortal=e=>{const t=je()(this,r.default.createElement(Fe,ne({defaultStyles:We.defaultStyles},e)),this.node);this.portalRef(t)};render(){if(!Ne||!Ue)return null;!this.node&&Ue&&(this.node=Ge("div"));return je()(r.default.createElement(Fe,ne({ref:this.portalRef,defaultStyles:We.defaultStyles},this.props)),this.node)}}A(""),We.setAppElement("#modal");const qe=({width:e,height:a,children:n,className:l,confirm:o,visible:s,skipClose:i,open:c,closeModal:d,wrapClassName:u="",modalClassName:m="",...f})=>{const[p,h]=t.useState(!1);t.useEffect((()=>{c?y():E(!0)}),[c]);const y=()=>{h(!0)},E=e=>{h(!1),d(e)};let b={content:{},overlay:{}};return e&&(b.content.width=e,b.content.height=a),r.default.createElement(We,ne({parentSelector:()=>document.querySelector("#modal"),isOpen:p,onRequestClose:()=>E(),style:b,closeTimeoutMS:0,overlayClassName:"sellix-overlay",className:`sellix-modal ${l||""} ${o?"confirm":""} ${s?"visible":""}`,shouldCloseOnOverlayClick:!i,wrapClassName:u,modalClassName:m},f),!i&&r.default.createElement("div",{className:"sellix-modal-close",onClick:()=>E()},r.default.createElement("i",{className:"fa-light fa-times",style:{color:"var(--black9)",fontSize:"1.25rem"}})),n)},Ve=()=>{const{theme:e}=v(),t=e.isDark,{detailsModal:a,trackModal:n,modalVisible:l,closeAnyModal:o}=u();return i()?r.default.createElement("div",{className:"embed-info-container"},n?r.default.createElement(ce,null):null,a?r.default.createElement(de,null):null):r.default.createElement(qe,{open:l,closeModal:o,className:"embed-info-modal "+(t?"darkTheme":"lightTheme")},r.default.createElement("div",{className:"embed-info-container"},n?r.default.createElement(ce,null):null))},Ye=()=>{const{invoiceInfo:e,isOpenGateways:t,showGateways:a,setGateway:n,isCashApp:l,cashAppStep:o,setCashAppStep:s,hideInfo:i,isEmbed:c,isSubscription:d}=k(),{status:u,gateway:m}=e;let f="PENDING"===u?"Awaiting for Payments":"PARTIAL"===u?"Partial Payment Received":"COMPLETED"===u?"Completed":"VOIDED"===u?"Voided":"REVERSED"===u?"Reversed":"REFUNDED"===u?"Refunded":"CUSTOMER_DISPUTE_ONGOING"===u?"Dispute Ongoing":"WAITING_FOR_CONFIRMATIONS"===u?"Waiting for Confirmations":"WAITING_SHOP_ACTION"===u?"Waiting Merchant Action":"PROCESSING"===u?"Processing":"";return i?null:r.default.createElement(r.default.Fragment,null,m?t?r.default.createElement("div",{className:"embed-back",onClick:()=>{a(!1),n(e.gateway)}},r.default.createElement("div",null,r.default.createElement(O,{left:!0})," Back")):l?!0===o?r.default.createElement("div",{className:"embed-back",onClick:()=>s(!1)},r.default.createElement("div",null,r.default.createElement(O,{left:!0})," Back"),r.default.createElement("div",null,f?r.default.createElement("div",{className:`embed-back-badge ${("PARTIAL"===u||"PENDING"===u)&&"orange"}`},f):null)):!1===o?r.default.createElement("div",{className:"embed-back",onClick:()=>s(null)},r.default.createElement("div",null,r.default.createElement(O,{left:!0})," Guide"),r.default.createElement("div",null,f?r.default.createElement("div",{className:`embed-back-badge ${("PARTIAL"===u||"PENDING"===u)&&"orange"}`},f):null)):d?null:r.default.createElement("div",{className:"embed-back",onClick:()=>a(!0)},r.default.createElement("div",null,r.default.createElement(O,{left:!0})," Change gateway"),r.default.createElement("div",null,f?r.default.createElement("div",{className:`embed-back-badge ${("PARTIAL"===u||"PENDING"===u)&&"orange"}`},f):null)):d?null:r.default.createElement("div",{className:"embed-back",onClick:()=>a(!0)},r.default.createElement("div",null,r.default.createElement(O,{left:!0})," Change gateway"),r.default.createElement("div",null,f?r.default.createElement("div",{className:`embed-back-badge ${("PARTIAL"===u||"PENDING"===u)&&"orange"}`},f):null)):null)},ze=()=>{const e=i(),{isOpenGateways:t,hideInfo:a}=k();return r.default.createElement("div",{className:"embed-container "+(a&&!e?"justify-content-center":"")},r.default.createElement(Ye,null),r.default.createElement("div",{className:"embed-product-card"},r.default.createElement("div",{className:"embed-body"},r.default.createElement(Status,null))))},Xe=()=>{const{theme:e}=v(),t=e.isDark,a=i(),{loading:n,invoiceInfo:l}=k(),{modalVisible:o,closeAnyModal:s}=u(),c=a&&o?"active":"inactive";return r.default.createElement(r.default.Fragment,null,n?"Loading...":r.default.createElement("div",{className:"embed-screen is-checkout "+(t?"darkTheme":"lightTheme")},r.default.createElement("div",{className:`embed-wrapper ${c}`,style:["PENDING","PARTIAL"].includes(l.status)||a?{}:{paddingBottom:"3rem"}},r.default.createElement(ze,null),r.default.createElement(Ve,null))))};A("");const Ke=()=>{const{theme:e}=v(),a=e.isDark,{modalVisible:n}=u(),{isOpenGateways:l,gateway:o,APM:s}=k(),{windowHeight:c,windowWidth:d}=function(){const[e,a]=t.useState(window.innerWidth),[n,l]=t.useState(window.innerHeight);function r(){a(window.innerWidth),l(window.innerHeight)}return t.useEffect((()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)})),[]),{windowWidth:e,windowHeight:n}}(),m=i();return t.useEffect((()=>{let e=document.getElementsByClassName("sellix-checkout-invoice")[0],t=document.getElementsByClassName("embed-form")[0],a=document.getElementsByClassName("embed-gateway-container")[0],r=document.getElementsByClassName("embed-back")[0];if(m)n&&e&&e.scroll({top:0,behavior:"smooth"});else if(l){if(a){let e=window.innerHeight<=860&&window.innerWidth>768,n=0;r&&(n=r.clientHeight),a.style.maxHeight=`calc(${window.innerHeight}px - ${40+(e?24:80)+n+t.clientHeight}px)`}}else a&&(a.style="")}),[n,l,o,s,m,c,d]),r.default.createElement("div",{className:"sellix-checkout "+(a?"darkTheme":"lightTheme")},r.default.createElement("div",{className:"sellix-checkout-container"},r.default.createElement("div",{className:"sellix-checkout-details"},r.default.createElement(ae,null)),r.default.createElement("div",{className:"sellix-checkout-invoice "+(l?"is-gateways":""),style:m&&n?{padding:0}:{}},r.default.createElement(Xe,null))))};return e.InvoiceCheckout=e=>r.default.createElement(g,e,r.default.createElement(N,null,r.default.createElement(m,null,r.default.createElement(Ke,null)))),Object.defineProperty(e,"__esModule",{value:!0}),e}({},React,moment,ReactDOM);
