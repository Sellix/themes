{% set id = uid() %}
{% set properties = args.properties %}

{% set iconSnippet = safe_get(properties.icon_snippet, '') %}
{% set iconPosition = safe_get(properties.icon_position, 'right') %}
{% set bgColor = safe_get(properties.background_color | get_color, '') %}
{% set labelColor = safe_get(properties.label_color | get_color, '') %}
{% set labelFontSize = safe_get(properties.label_font_size, false) %}
{% set labelFontSize = [labelFontSize, 'px'] | join if labelFontSize else '' %}
{% set labelFontWeight = safe_get(properties.label_font_weight, '') %}
{% set url = properties.url %}
{% set isLink = safe_get(properties.is_link, false) %}

{% set label = properties.label | t({keyPrefix: 'shop.shared.titles'}) %}

{% set globalClass = 'snippet-link_button' %}
{% set localClass = id %}

<style>
  .{{ globalClass }}.{{ localClass }} .button {
    color: {{ labelColor }};
    background-color: {{ bgColor }};
    font-size: {{ labelFontSize }};
    font-weight: {{ labelFontWeight }};
  }
</style>

<div class="{{ globalClass }} {{ localClass }}">
  <a href="{{ url }}" class="button {{ 'button-link' if isLink }}">
    {% if iconSnippet and iconPosition == 'left' %}
      <span class="mr-2 d-flex">
        {% render_snippet iconSnippet %}
      </span>
    {% endif %}

    <span>
      {{ label }}
    </span>

    {% if iconSnippet and iconPosition == 'right' %}
      <span class="ml-2 d-flex">
        {% render_snippet iconSnippet %}
      </span>
    {% endif %}
  </a>
</div>
