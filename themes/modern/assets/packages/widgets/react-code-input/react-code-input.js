var ReactCodeInput=function(e,t){"use strict";class a extends e.Component{constructor(e){super(e);const{fields:t,type:a,isValid:s,disabled:i,filterKeyCodes:l,forceUppercase:n}=e;let{value:o}=e;n&&(o=o.toUpperCase()),this.state={value:o,fields:t,type:a,input:[],isValid:s,disabled:i,filterKeyCodes:l,defaultInputStyle:{fontFamily:"monospace",MozAppearance:"textfield",borderRadius:"6px",border:"1px solid",boxShadow:"0px 0px 10px 0px rgba(0,0,0,.10)",margin:"4px",padding:"0 8px",width:"36px",height:"42px",fontSize:"32px",boxSizing:"border-box"}};for(let e=0;e<Number(this.state.fields);e+=1)if(e<32){const t=this.state.value[e]||"";this.state.input.push(t)}this.textInput=[],this.uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}UNSAFE_componentWillReceiveProps(e){this.setState({isValid:e.isValid,value:e.value,disabled:e.disabled})}handleBlur(e){this.handleTouch(e.target.value)}handleTouch(e){const{touch:t,untouch:a,name:s}=this.props;"function"==typeof t&&"function"==typeof a&&(""===e?t(s):a(s))}handleChange(e){const{filterChars:t,filterCharsIsWhitelist:a}=this.props;let s=String(e.target.value);this.props.forceUppercase&&(s=s.toUpperCase()),"number"===this.state.type&&(s=s.replace(/[^\d]/g,"")),s=s.split("").filter((e=>a?t.includes(e):!t.includes(e))).join("");let i=s;if(""!==s){const t=this.state.input.slice();s.length>1?s.split("").map(((a,s)=>(Number(e.target.dataset.id)+s<this.props.fields&&(t[Number(e.target.dataset.id)+s]=a),!1))):t[Number(e.target.dataset.id)]=s,t.map(((e,t)=>(this.textInput[t]&&(this.textInput[t].value=e),!1)));const a=this.textInput[e.target.dataset.id<t.length?Number(e.target.dataset.id)+1:e.target.dataset.id];a&&(a.focus(),a.select()),i=t.join(""),this.setState({value:t.join(""),input:t})}this.props.onChange&&i&&this.props.onChange(i),this.handleTouch(i)}handleKeyDown(e){const t=Number(e.target.dataset.id),a=this.textInput[t+1],s=this.textInput[t-1];let i,l;switch(this.state.filterKeyCodes.length>0&&this.state.filterKeyCodes.map((t=>{if(t===e.keyCode)return e.preventDefault(),!0})),e.keyCode){case 8:e.preventDefault(),this.textInput[t].value="",i=this.state.input.slice(),i[t]="",l=i.join(""),this.setState({value:l,input:i}),""===this.textInput[t].value&&s&&(s.focus(),s.select()),this.props.onChange&&this.props.onChange(l);break;case 37:e.preventDefault(),s&&(s.focus(),s.select());break;case 39:e.preventDefault(),a&&(a.focus(),a.select());break;case 38:case 40:e.preventDefault();break;case 69:if("number"===e.target.type){e.preventDefault();break}}this.handleTouch(l)}render(){const{className:t,style:a={},inputStyle:s={},inputStyleInvalid:i={},type:l,autoFocus:n,autoComplete:o,pattern:r,inputMode:u,placeholder:p}=this.props,{disabled:d,input:c,isValid:h,defaultInputStyle:f}=this.state,x={container:{display:"inline-block",...a},input:h?s:i};return t||0!==Object.keys(s).length||Object.assign(s,{...f,color:"black",backgroundColor:"white",borderColor:"lightgrey"}),t||0!==Object.keys(i).length||Object.assign(i,{...f,color:"#b94a48",backgroundColor:"#f2dede",borderColor:"#eed3d7"}),d&&Object.assign(x.input,{cursor:"not-allowed",color:"lightgrey",borderColor:"lightgrey",backgroundColor:"#efeff1"}),e.createElement("div",{className:`react-code-input ${t}`,style:x.container},c.map(((t,a)=>e.createElement("input",{ref:e=>{this.textInput[a]=e},id:`${this.uuid}-${a}`,"data-id":a,autoFocus:n&&0===a?"autoFocus":"",value:t,key:`input_${a}`,type:l,min:0,max:9,maxLength:c.length===a+1?1:c.length,style:x.input,autoComplete:o,onFocus:e=>e.target.select(e),onBlur:e=>this.handleBlur(e),onChange:e=>this.handleChange(e),onKeyDown:e=>this.handleKeyDown(e),disabled:d,"data-valid":h,pattern:r,inputMode:u,placeholder:p}))))}}return a.defaultProps={autoComplete:"off",autoFocus:!0,isValid:!0,disabled:!1,forceUppercase:!1,fields:4,value:"",type:"text",filterKeyCodes:[189,190],filterChars:["-","."],filterCharsIsWhitelist:!1},a.propTypes={type:t.oneOf(["text","number","password","tel"]),fields:t.number,placeholder:t.string,value:t.string,onChange:t.func,name:t.string,touch:t.func,untouch:t.func,className:t.string,isValid:t.bool,disabled:t.bool,style:t.object,inputStyle:t.object,inputStyleInvalid:t.object,autoComplete:t.string,autoFocus:t.bool,forceUppercase:t.bool,filterKeyCodes:t.array,filterChars:t.array,filterCharsIsWhitelist:t.bool,pattern:t.string,inputMode:t.oneOf(["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"])},a}(React,PropTypes);
