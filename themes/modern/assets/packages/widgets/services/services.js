var Services=function(e){"use strict";var t=Object.defineProperty,n=(e,n,i)=>(((e,n,i)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i})(e,"symbol"!=typeof n?n+"":n,i),i);class i{constructor(e={}){n(this,"name","BaseAnalyticsEventManager"),n(this,"debug",!1),this.debug=!!e.debug}get isEnabled(){throw new Error("Method not implemented.")}init(e){throw new Error("Method not implemented.")}sendAddToCart(e,t,n){throw new Error("Method not implemented.")}sendRemoveFromCart(e,t,n){throw new Error("Method not implemented.")}sendSelectItem(e,t,n){throw new Error("Method not implemented.")}sendViewItem(e,t,n){throw new Error("Method not implemented.")}sendViewCart(e,t,n){throw new Error("Method not implemented.")}sendBeginCheckout(e){throw new Error("Method not implemented.")}sendPurchase(e){throw new Error("Method not implemented.")}sendShare(e,t,n){throw new Error("Method not implemented.")}sendEvent(e,t){throw new Error("Method not implemented.")}debugLog(e,t){this.debug&&console.debug(e,t)}safeSendEvent(e,t){try{t()}catch(t){console.error(e,t)}}}var a=Object.defineProperty,s=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class o extends i{constructor(){super(...arguments),s(this,"name","GoogleAnalyticsEventManager")}get isEnabled(){return"function"==typeof gtag}init(e){!e||this.isEnabled||(e=>{const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`;const n=document.getElementsByTagName("script");if(n.length){const i=n[0];i.parentNode&&(i.parentNode.insertBefore(t,i),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e))}})(e)}sendAddToCart(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("add_to_cart",i,`${this.name}::sendAddToCart`)}sendRemoveFromCart(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("remove_from_cart",i,`${this.name}::sendRemoveFromCart`)}sendSelectItem(e,t,n){if(!this.isEnabled)return;const i={item_list_id:e,item_list_name:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("select_item",i,`${this.name}::sendSelectItem`)}sendViewItem(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("view_item",i,`${this.name}::sendViewItem`)}sendViewCart(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("view_cart",i,`${this.name}::sendViewCart`)}sendBeginCheckout(e){if(!this.isEnabled)return;const t={event_id:e.uniqid,content_name:e.content_name,type:e.type,transaction_id:e.uniqid,currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax,items:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("begin_checkout",t,`${this.name}::sendBeginCheckout`)}sendPurchase(e){if(!this.isEnabled)return;const t={event_id:e.uniqid,content_name:e.content_name,type:e.type,transaction_id:e.uniqid,currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax,items:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("begin_checkout",t,`${this.name}::sendPurchase`)}sendShare(e,t,n){if(!this.isEnabled)return;const i={method:e,content_type:t,item_id:n};this.sendEvent("share",i,`${this.name}::sendShare`)}sendEvent(e,t,n=""){this.isEnabled&&(n=n||`${this.name}::sendEvent`,this.debugLog(n,t),this.safeSendEvent(n,(()=>gtag("event",e))))}prepareProductData(e,t){return{index:e,item_id:t.uniqid,item_type:t.type,item_name:t.title,item_variant:t.variant,price:t.price,quantity:t.quantity||1,coupon:t.coupon,discount:t.discount,currency:t.currency}}}var r=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class d extends i{constructor(){super(...arguments),c(this,"name","FacebookAnalyticsEventManager")}get isEnabled(){return"function"==typeof fbq}init(e){!e||this.isEnabled||(e=>{e&&(function(e,t,n,i,a,s,o){e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],(s=t.createElement(n)).async=!0,s.src="https://connect.facebook.net/en_US/fbevents.js",(o=t.getElementsByTagName(n)[0]).parentNode.insertBefore(s,o))}(window,document,"script"),fbq("init",`${e}`),fbq("track","PageView"))})(e)}sendAddToCart(e,t,n){if(!this.isEnabled)return;const i=n.map((e=>e.uniqid)),a={content_type:"product",value:t,currency:e,content_ids:i,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("AddToCart",a,`${this.name}::sendAddToCart`,`AddToCart_${i.join(",")}_${+Date.now()}`)}sendRemoveFromCart(e,t,n){if(!this.isEnabled)return;const i=n.map((e=>e.uniqid)),a={content_type:"product",value:t,currency:e,content_ids:i,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("RemoveFromCart",a,`${this.name}::sendRemoveFromCart`,`RemoveFromCart_${i.join(",")}_${+Date.now()}`)}sendSelectItem(e,t,n){if(!this.isEnabled)return;const i={content_type:"product",item_list_id:e,item_list_name:t,content_ids:n.map((e=>e.uniqid)),contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("SelectItem",i,`${this.name}::sendSelectItem`)}sendViewItem(e,t,n){if(!this.isEnabled)return;const i={content_type:"product",content_category:"Product",value:t,currency:e,content_ids:n.map((e=>e.uniqid)),contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",i,`${this.name}::sendViewItem`)}sendViewCart(e,t,n){if(!this.isEnabled)return;const i={content_type:"product_group",content_category:"Cart",value:t,currency:e,content_ids:n.map((e=>e.uniqid)),contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",i,`${this.name}::sendViewCart`)}sendBeginCheckout(e){if(!this.isEnabled)return;const t={content_name:e.content_name,content_type:"SHOPPING_CART"===e.type?"product_group":"product",content_category:"Checkout",currency:e.currency,value:e.price,coupon:e.coupon,num_items:e.items.length,content_ids:e.items.map((e=>e.uniqid)),contents:e.items.map(((e,t)=>this.prepareProductData(t,e))),custom_data:{gateway:e.gateway,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax}};this.sendEvent("InitiateCheckout",t,`${this.name}::sendBeginCheckout`,e.uniqid)}sendPurchase(e){if(!this.isEnabled)return;const t={content_name:e.content_name,content_type:"SHOPPING_CART"===e.type?"product_group":"product",content_category:"Purchase",currency:e.currency,value:e.price,coupon:e.coupon,num_items:e.items.length,content_ids:e.items.map((e=>e.uniqid)),contents:e.items.map(((e,t)=>this.prepareProductData(t,e))),custom_data:{gateway:e.gateway,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},transaction_id:e.uniqid,tax:e.tax}};this.sendEvent("Purchase",t,`${this.name}::sendBeginCheckout`,e.uniqid)}sendShare(e,t,n){if(!this.isEnabled)return;const i={method:e,content_type:t,content_id:n};this.sendEvent("Share",i,`${this.name}::sendShare`)}sendEvent(e,t,n="",i=""){if(!this.isEnabled)return;const a=i?{eventID:i}:{};n=n||`${this.name}::sendEvent`,this.debugLog(n,{payload:t,options:a});const s=["AddToCart","ViewContent","InitiateCheckout","Purchase"].includes(e)?"track":"trackCustom";this.safeSendEvent(n,(()=>fbq(s,e,t,a)))}prepareProductData(e,t){return{index:e,content_id:t.uniqid,content_type:"GROUP"===t.type?"product_group":"product",content_name:t.title,content_variant:t.variant,type:t.type,value:t.price,quantity:t.quantity,coupon:t.coupon,discount:t.discount,currency:t.currency}}}var u=Object.defineProperty,h=(e,t,n)=>(((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let m=class extends i{constructor(){super(...arguments),h(this,"name","TiktokAnalyticsEventManager")}get isEnabled(){return"object"==typeof ttq&&!!ttq.track}init(e){!e||this.isEnabled||(e=>{!function(t,n,i){t.TiktokAnalyticsObject=i;var a=t[i]=t[i]||[];a.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],a.setAndDefer=function(e,t){e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}};for(var s=0;s<a.methods.length;s++)a.setAndDefer(a,a.methods[s]);a.instance=function(e){for(var t=a._i[e]||[],n=0;n<a.methods.length;n++)a.setAndDefer(t,a.methods[n]);return t},a.load=function(e,t){var n="https://analytics.tiktok.com/i18n/pixel/events.js";a._i=a._i||{},a._i[e]=[],a._i[e]._u=n,a._t=a._t||{},a._t[e]=+new Date,a._o=a._o||{},a._o[e]=t||{};var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=n+"?sdkid="+e+"&lib="+i;var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(s,o)},a.load(`${e}`),a.page()}(window,document,"ttq")})(e)}sendAddToCart(e,t,n){if(!this.isEnabled)return;const i={content_type:"product",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("AddToCart",i,`${this.name}::sendAddToCart`)}sendRemoveFromCart(e,t,n){if(!this.isEnabled)return;const i={content_type:"product",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("RemoveFromCart",i,`${this.name}::sendRemoveFromCart`)}sendSelectItem(e,t,n){if(!this.isEnabled)return;const i={content_type:"product",item_list_id:e,item_list_name:t,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("SelectItem",i,`${this.name}::sendSelectItem`)}sendViewItem(e,t,n){if(!this.isEnabled)return;const i={content_type:"product",content_category:"Product",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",i,`${this.name}::sendViewItem`)}sendViewCart(e,t,n){if(!this.isEnabled)return;const i={content_type:"product_group",content_category:"Cart",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",i,`${this.name}::sendViewCart`)}sendBeginCheckout(e){if(!this.isEnabled)return;const t={event_id:e.uniqid,content_name:e.content_name,content_type:"SHOPPING_CART"===e.type?"product_group":"product",content_category:"Checkout",currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},num_items:e.items.length,contents:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("StartCheckout",t,`${this.name}::sendBeginCheckout`)}sendPurchase(e){if(!this.isEnabled)return;const t={event_id:e.uniqid,content_name:e.content_name,content_type:"SHOPPING_CART"===e.type?"product_group":"product",content_category:"Purchase",transaction_id:e.uniqid,currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},num_items:e.items.length,content_ids:e.items.map((e=>e.uniqid)),contents:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("Purchase",t,`${this.name}::sendBeginCheckout`)}sendShare(e,t,n){if(!this.isEnabled)return;const i={method:e,content_type:t,content_id:n};this.sendEvent("Share",i,`${this.name}::sendShare`)}sendEvent(e,t,n=""){this.isEnabled&&(n=n||`${this.name}::sendEvent`,this.debugLog(n,t),this.safeSendEvent(n,(()=>ttq.track(e,t))))}prepareProductData(e,t){return{index:e,content_id:t.uniqid,content_type:"GROUP"===t.type?"product_group":"product",content_name:t.title,content_variant:t.variant,type:t.type,price:t.price,quantity:t.quantity,coupon:t.coupon,discount:t.discount,currency:t.currency}}};var l=Object.defineProperty,p=(e,t,n)=>(((e,t,n)=>{t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class g extends i{constructor(){super(...arguments),p(this,"name","MicrosoftAnalyticsEventManager"),p(this,"initialized",!1)}get isEnabled(){return this.initialized}init(e){!e||this.isEnabled||((e=>{!function(e,t,n,i,a,s,o){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},(s=t.createElement(i)).async=1,s.src="https://www.clarity.ms/tag/"+a,(o=t.getElementsByTagName(i)[0]).parentNode.insertBefore(s,o)}(window,document,"clarity","script",`${e}`)})(e),this.initialized=!0)}}var y=Object.defineProperty,_=(e,t,n)=>(((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);return e.AnalyticsEventManager=class extends i{constructor(e={}){super(e),_(this,"google"),_(this,"facebook"),_(this,"tiktok"),_(this,"microsoft"),this.google=new o({debug:this.debug}),this.facebook=new d({debug:this.debug}),this.tiktok=new m({debug:this.debug}),this.microsoft=new g({debug:this.debug})}get isEnabled(){return this.debug&&console.log("AnalyticsEventManager::isEnabled",{google:this.google.isEnabled,facebook:this.facebook.isEnabled,tiktok:this.tiktok.isEnabled,microsoft:this.microsoft.isEnabled}),this.google.isEnabled||this.facebook.isEnabled||this.tiktok.isEnabled}initAll({google_tag_id:e,facebook_pixel_id:t,tiktok_pixel_id:n,microsoft_clarity_tag_id:i}){this.google.init(e),this.facebook.init(t),this.tiktok.init(n),this.microsoft.init(i)}sendAddToCart(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendAddToCart"),this.google.sendAddToCart(e,t,n),this.facebook.sendAddToCart(e,t,n),this.tiktok.sendAddToCart(e,t,n)}sendRemoveFromCart(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendRemoveFromCart"),this.google.sendRemoveFromCart(e,t,n),this.facebook.sendRemoveFromCart(e,t,n),this.tiktok.sendRemoveFromCart(e,t,n)}sendSelectItem(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendEvent"),this.google.sendSelectItem(e,t,n),this.facebook.sendSelectItem(e,t,n),this.tiktok.sendSelectItem(e,t,n)}sendEvent(e,t){this.debug&&console.log("AnalyticsEventManager::sendEvent"),this.google.sendEvent(e,t),this.facebook.sendEvent(e,t),this.tiktok.sendEvent(e,t)}sendViewItem(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendViewItem"),this.google.sendViewItem(e,t,n),this.facebook.sendViewItem(e,t,n),this.tiktok.sendViewItem(e,t,n)}sendViewCart(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendViewCart"),this.google.sendViewCart(e,t,n),this.facebook.sendViewCart(e,t,n),this.tiktok.sendViewCart(e,t,n)}sendBeginCheckout(e){this.debug&&console.log("AnalyticsEventManager::sendBeginCheckout"),this.google.sendBeginCheckout(e),this.facebook.sendBeginCheckout(e),this.tiktok.sendBeginCheckout(e)}sendPurchase(e){this.debug&&console.log("AnalyticsEventManager::sendPurchase"),this.google.sendPurchase(e),this.facebook.sendPurchase(e),this.tiktok.sendPurchase(e)}},e}({});
