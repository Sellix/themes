var Services=function(e){"use strict";var t=Object.defineProperty,n=(e,n,i)=>(((e,n,i)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i})(e,"symbol"!=typeof n?n+"":n,i),i);class i{constructor(e={}){n(this,"name","BaseAnalyticsEventManager"),n(this,"debug",!1),this.debug=!!e.debug}get isEnabled(){throw new Error("Method not implemented.")}init(e){throw new Error("Method not implemented.")}sendAddToCart(e,t,n){throw new Error("Method not implemented.")}sendRemoveFromCart(e,t,n){throw new Error("Method not implemented.")}sendSelectItem(e,t,n){throw new Error("Method not implemented.")}sendViewItem(e,t,n){throw new Error("Method not implemented.")}sendViewCart(e,t,n){throw new Error("Method not implemented.")}sendBeginCheckout(e){throw new Error("Method not implemented.")}sendPurchase(e){throw new Error("Method not implemented.")}sendShare(e,t,n){throw new Error("Method not implemented.")}sendEvent(e,t){throw new Error("Method not implemented.")}debugLog(e,t){this.debug&&console.debug(e,t)}safeSendEvent(e,t){try{t()}catch(t){console.error(e,t)}}}var o=Object.defineProperty,r=(e,t,n)=>(((e,t,n)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let s=class extends i{constructor(){super(...arguments),r(this,"name","GoogleAnalyticsEventManager")}get isEnabled(){return"function"==typeof gtag}init(e){!e||this.isEnabled||(e=>{const t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`;const n=document.getElementsByTagName("script");if(n.length){const i=n[0];i.parentNode&&(i.parentNode.insertBefore(t,i),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e))}})(e)}sendAddToCart(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("add_to_cart",i,`${this.name}::sendAddToCart`)}sendRemoveFromCart(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("remove_from_cart",i,`${this.name}::sendRemoveFromCart`)}sendSelectItem(e,t,n){if(!this.isEnabled)return;const i={item_list_id:e,item_list_name:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("select_item",i,`${this.name}::sendSelectItem`)}sendViewItem(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("view_item",i,`${this.name}::sendViewItem`)}sendViewCart(e,t,n){if(!this.isEnabled)return;const i={currency:e,value:t,items:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("view_cart",i,`${this.name}::sendViewCart`)}sendBeginCheckout(e){if(!this.isEnabled)return;const t={event_id:e.uniqid,content_name:e.content_name,type:e.type,transaction_id:e.uniqid,currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax,items:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("begin_checkout",t,`${this.name}::sendBeginCheckout`)}sendPurchase(e){if(!this.isEnabled)return;const t={event_id:e.uniqid,content_name:e.content_name,type:e.type,transaction_id:e.uniqid,currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax,items:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("purchase",t,`${this.name}::sendPurchase`)}sendShare(e,t,n){if(!this.isEnabled)return;const i={method:e,content_type:t,item_id:n};this.sendEvent("share",i,`${this.name}::sendShare`)}sendEvent(e,t,n=""){this.isEnabled&&(n=n||`${this.name}::sendEvent`,this.debugLog(n,t),this.safeSendEvent(n,(()=>gtag("event",e))))}prepareProductData(e,t){return{index:e,item_id:t.uniqid,item_type:t.type,item_name:t.title,item_variant:t.variant,price:t.price,quantity:t.quantity||1,coupon:t.coupon,discount:t.discount,currency:t.currency}}};var a=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class d extends i{constructor(){super(...arguments),c(this,"name","FacebookAnalyticsEventManager")}get isEnabled(){return"function"==typeof fbq}init(e){!e||this.isEnabled||(e=>{e&&(function(e,t,n,i,o,r,s){e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(r=t.createElement(n)).async=!0,r.src="https://connect.facebook.net/en_US/fbevents.js",(s=t.getElementsByTagName(n)[0]).parentNode.insertBefore(r,s))}(window,document,"script"),fbq("init",`${e}`),fbq("track","PageView"))})(e)}sendAddToCart(e,t,n){if(!this.isEnabled)return;const i=n.some((e=>"group"===(e.type||"").toLowerCase())),o=n.map((e=>e.uniqid)),r={content_type:i?"product_group":"product",value:t,currency:e,content_ids:o,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("AddToCart",r,`${this.name}::sendAddToCart`,`AddToCart_${o.join(",")}_${+Date.now()}`)}sendRemoveFromCart(e,t,n){if(!this.isEnabled)return;const i=n.some((e=>"group"===(e.type||"").toLowerCase())),o=n.map((e=>e.uniqid)),r={content_type:i?"product_group":"product",value:t,currency:e,content_ids:o,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("RemoveFromCart",r,`${this.name}::sendRemoveFromCart`,`RemoveFromCart_${o.join(",")}_${+Date.now()}`)}sendSelectItem(e,t,n){if(!this.isEnabled)return;const i={content_type:n.some((e=>"group"===(e.type||"").toLowerCase()))?"product_group":"product",item_list_id:e,item_list_name:t,content_ids:n.map((e=>e.uniqid)),contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("SelectItem",i,`${this.name}::sendSelectItem`)}sendViewItem(e,t,n){if(!this.isEnabled)return;const i=n.some((e=>"group"===(e.type||"").toLowerCase())),o=n.map((e=>e.uniqid)),r={content_type:i?"product_group":"product",content_category:i?"Group":"Product",value:t,currency:e,content_ids:o,contents:n.map(((e,t)=>this.prepareProductData(t,e)))},s=i?`ViewGroup_${o.join(",")}_${+Date.now()}`:void 0;this.sendEvent("ViewContent",r,`${this.name}::sendViewItem`,s)}sendViewCart(e,t,n){if(!this.isEnabled)return;const i={content_type:n.some((e=>"group"===(e.type||"").toLowerCase()))?"product_group":"product",content_category:"Cart",value:t,currency:e,content_ids:n.map((e=>e.uniqid)),contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",i,`${this.name}::sendViewCart`)}sendBeginCheckout(e){if(!this.isEnabled)return;const t=e.items.some((e=>"group"===(e.type||"").toLowerCase())),n={content_name:e.content_name,content_type:t?"product_group":"product",content_category:"Checkout",currency:e.currency,value:e.price,coupon:e.coupon,num_items:e.items.length,content_ids:e.items.map((e=>e.uniqid)),contents:e.items.map(((e,t)=>this.prepareProductData(t,e))),custom_data:{transaction_id:e.uniqid,gateway:e.gateway,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax}};this.sendEvent("InitiateCheckout",n,`${this.name}::sendBeginCheckout`,`InitiateCheckout_${e.uniqid}`)}sendPurchase(e){if(!this.isEnabled)return;const t=e.items.some((e=>"group"===(e.type||"").toLowerCase())),n={content_name:e.content_name,content_type:t?"product_group":"product",content_category:"Purchase",currency:e.currency,value:e.price,coupon:e.coupon,num_items:e.items.length,content_ids:e.items.map((e=>e.uniqid)),contents:e.items.map(((e,t)=>this.prepareProductData(t,e))),custom_data:{transaction_id:e.uniqid,gateway:e.gateway,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax}};this.sendEvent("Purchase",n,`${this.name}::sendPurchase`,`Purchase_${e.uniqid}`)}sendShare(e,t,n){if(!this.isEnabled)return;const i={method:e,content_type:t,content_id:n};this.sendEvent("Share",i,`${this.name}::sendShare`)}sendEvent(e,t,n="",i=""){if(!this.isEnabled)return;const o=i?{eventID:i}:{};n=n||`${this.name}::sendEvent`,this.debugLog(n,{payload:t,options:o});const r=["AddToCart","ViewContent","InitiateCheckout","Purchase"].includes(e)?"track":"trackCustom";this.safeSendEvent(n,(()=>fbq(r,e,t,o)))}prepareProductData(e,t){return{index:e,content_id:t.uniqid,content_type:"group"===(t.type||"").toLowerCase()?"product_group":"product",content_name:t.title,content_variant:t.variant,type:t.type,value:t.price,quantity:t.quantity,coupon:t.coupon,discount:t.discount,currency:t.currency}}}var u=Object.defineProperty,p=(e,t,n)=>(((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let h=class extends i{constructor(){super(...arguments),p(this,"name","TiktokAnalyticsEventManager")}get isEnabled(){return"object"==typeof ttq&&!!ttq.track}init(e){!e||this.isEnabled||(e=>{!function(t,n,i){t.TiktokAnalyticsObject=i;var o=t[i]=t[i]||[];o.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],o.setAndDefer=function(e,t){e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}};for(var r=0;r<o.methods.length;r++)o.setAndDefer(o,o.methods[r]);o.instance=function(e){for(var t=o._i[e]||[],n=0;n<o.methods.length;n++)o.setAndDefer(t,o.methods[n]);return t},o.load=function(e,t){var n="https://analytics.tiktok.com/i18n/pixel/events.js";o._i=o._i||{},o._i[e]=[],o._i[e]._u=n,o._t=o._t||{},o._t[e]=+new Date,o._o=o._o||{},o._o[e]=t||{};var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=n+"?sdkid="+e+"&lib="+i;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s)},o.load(`${e}`),o.page()}(window,document,"ttq")})(e)}sendAddToCart(e,t,n){if(!this.isEnabled)return;const i={content_type:n.some((e=>"group"===(e.type||"").toLowerCase()))?"product_group":"product",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("AddToCart",i,`${this.name}::sendAddToCart`)}sendRemoveFromCart(e,t,n){if(!this.isEnabled)return;const i={content_type:n.some((e=>"group"===(e.type||"").toLowerCase()))?"product_group":"product",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("RemoveFromCart",i,`${this.name}::sendRemoveFromCart`)}sendSelectItem(e,t,n){if(!this.isEnabled)return;const i={content_type:n.some((e=>"group"===(e.type||"").toLowerCase()))?"product_group":"product",item_list_id:e,item_list_name:t,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("SelectItem",i,`${this.name}::sendSelectItem`)}sendViewItem(e,t,n){if(!this.isEnabled)return;const i=n.some((e=>"group"===(e.type||"").toLowerCase())),o={content_type:i?"product_group":"product",content_category:i?"Group":"Product",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",o,`${this.name}::sendViewItem`)}sendViewCart(e,t,n){if(!this.isEnabled)return;const i={content_type:n.some((e=>"group"===(e.type||"").toLowerCase()))?"product_group":"product",content_category:"Cart",value:t,currency:e,contents:n.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("ViewContent",i,`${this.name}::sendViewCart`)}sendBeginCheckout(e){if(!this.isEnabled)return;const t=e.items.some((e=>"group"===(e.type||"").toLowerCase())),n={event_id:`StartCheckout_${e.uniqid}`,transaction_id:e.uniqid,content_name:e.content_name,content_type:t?"product_group":"product",content_category:"Checkout",currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax,num_items:e.items.length,contents:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("StartCheckout",n,`${this.name}::sendBeginCheckout`)}sendPurchase(e){if(!this.isEnabled)return;const t=e.items.some((e=>"group"===(e.type||"").toLowerCase())),n={event_id:`Purchase_${e.uniqid}`,transaction_id:e.uniqid,content_name:e.content_name,content_type:t?"product_group":"product",content_category:"Purchase",currency:e.currency,value:e.price,gateway:e.gateway,coupon:e.coupon,affiliate:{revenue:e.affiliate_revenue,currency:e.affiliate_revenue_currency},tax:e.tax,num_items:e.items.length,content_ids:e.items.map((e=>e.uniqid)),contents:e.items.map(((e,t)=>this.prepareProductData(t,e)))};this.sendEvent("Purchase",n,`${this.name}::sendPurchase`)}sendShare(e,t,n){if(!this.isEnabled)return;const i={method:e,content_type:t,content_id:n};this.sendEvent("Share",i,`${this.name}::sendShare`)}sendEvent(e,t,n=""){this.isEnabled&&(n=n||`${this.name}::sendEvent`,this.debugLog(n,t),this.safeSendEvent(n,(()=>ttq.track(e,t))))}prepareProductData(e,t){return{index:e,content_id:t.uniqid,content_type:"GROUP"===t.type?"product_group":"product",content_name:t.title,content_variant:t.variant,type:t.type,price:t.price,quantity:t.quantity,coupon:t.coupon,discount:t.discount,currency:t.currency}}};var m=Object.defineProperty,l=(e,t,n)=>(((e,t,n)=>{t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);class g extends i{constructor(){super(...arguments),l(this,"name","MicrosoftAnalyticsEventManager"),l(this,"initialized",!1)}get isEnabled(){return this.initialized}init(e){!e||this.isEnabled||((e=>{!function(e,t,n,i,o,r,s){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},(r=t.createElement(i)).async=1,r.src="https://www.clarity.ms/tag/"+o,(s=t.getElementsByTagName(i)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script",`${e}`)})(e),this.initialized=!0)}}var y=Object.defineProperty,_=(e,t,n)=>(((e,t,n)=>{t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);return e.AnalyticsEventManager=class extends i{constructor(e={}){super(e),_(this,"google"),_(this,"facebook"),_(this,"tiktok"),_(this,"microsoft"),this.google=new s({debug:this.debug}),this.facebook=new d({debug:this.debug}),this.tiktok=new h({debug:this.debug}),this.microsoft=new g({debug:this.debug})}get isEnabled(){return this.debug&&console.log("AnalyticsEventManager::isEnabled",{google:this.google.isEnabled,facebook:this.facebook.isEnabled,tiktok:this.tiktok.isEnabled,microsoft:this.microsoft.isEnabled}),this.google.isEnabled||this.facebook.isEnabled||this.tiktok.isEnabled}initAll({google_tag_id:e,facebook_pixel_id:t,tiktok_pixel_id:n,microsoft_clarity_tag_id:i}){this.google.init(e),this.facebook.init(t),this.tiktok.init(n),this.microsoft.init(i)}sendAddToCart(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendAddToCart"),this.google.sendAddToCart(e,t,n),this.facebook.sendAddToCart(e,t,n),this.tiktok.sendAddToCart(e,t,n)}sendRemoveFromCart(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendRemoveFromCart"),this.google.sendRemoveFromCart(e,t,n),this.facebook.sendRemoveFromCart(e,t,n),this.tiktok.sendRemoveFromCart(e,t,n)}sendSelectItem(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendEvent"),this.google.sendSelectItem(e,t,n),this.facebook.sendSelectItem(e,t,n),this.tiktok.sendSelectItem(e,t,n)}sendEvent(e,t){this.debug&&console.log("AnalyticsEventManager::sendEvent"),this.google.sendEvent(e,t),this.facebook.sendEvent(e,t),this.tiktok.sendEvent(e,t)}sendViewItem(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendViewItem"),this.google.sendViewItem(e,t,n),this.facebook.sendViewItem(e,t,n),this.tiktok.sendViewItem(e,t,n)}sendViewCart(e,t,n){this.debug&&console.log("AnalyticsEventManager::sendViewCart"),this.google.sendViewCart(e,t,n),this.facebook.sendViewCart(e,t,n),this.tiktok.sendViewCart(e,t,n)}sendBeginCheckout(e){this.debug&&console.log("AnalyticsEventManager::sendBeginCheckout"),this.google.sendBeginCheckout(e),this.facebook.sendBeginCheckout(e),this.tiktok.sendBeginCheckout(e)}sendPurchase(e){this.debug&&console.log("AnalyticsEventManager::sendPurchase"),this.google.sendPurchase(e),this.facebook.sendPurchase(e),this.tiktok.sendPurchase(e)}},e}({});
